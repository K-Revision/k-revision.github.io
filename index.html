<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>How to Create and Save text file in JavaScript</title>
    <script src="js/FileSaver.js"></script>
    <script>

		function saveDynamicDataToFile() {

            let fullDocument = [];

            let userInput = document.getElementById("myText").value;

            fullDocument.push('<?xml version="1.0" encoding="UTF-8"?>')
            fullDocument.push('<!--Generated by K-Revision-->')
            fullDocument.push('<?instance-generator id="K-Revision XBRL Generator" version="2020.01" creationdate="' + returnDate() + '"?>')
            //fullDocument.push('<xbrli:measure>' + userInput + '</xbrli:measure>')

            function documentToString() {
                let fullDocumentString = '';
                for(let i in fullDocument) {
                    fullDocumentString = fullDocumentString + fullDocument[i];
                }

                return fullDocumentString
            }

            let fullString = documentToString();

            let blob = new Blob([fullString], { type: "text/plain;charset=utf-8" });
            saveAs(blob, "dynamic.xml");
        }

        function returnDate() {
            let today = new Date();
            let dd = String(today.getDate()).padStart(2, '0');
            let mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
            let yyyy = today.getFullYear();
            let ho = String(today.getHours()).padStart(2, '0');
            let mi = String(today.getMinutes()).padStart(2, '0');
            let se = String(today.getSeconds()).padStart(2, '0');
            let gm = today.getTimezoneOffset();

            today = yyyy + '-' + mm + '-' + dd + 'T' + ho + ':' + mi + ':' + se + '+00:00';

            return today;
        }

        console.log(returnDate());
    </script>
</head>
<body>

    <textarea id="myText" rows="4" cols="50">
 We love to share our experiments, ideas, and knowledge with everyone by writing articles on the latest technology trends.
    </textarea>

    <button type="button" onclick="saveDynamicDataToFile();">Click to Save</button>
	
</body>
</html>